상관분석, 회귀분석

- 두 사건 간의 연관성을 분석해야 할 경우가 많다.
- 둘 이상의 변수들이 관련성을 가지고 변화할 때 그 관계를 분석하는 것 중 가장 많이 알려진 것이
- 상관분석과 회귀분석이다.

1. 상관분석

1-1. 상관분석?
- 변수들이 서로 얼마나 밀접하게 직선적인 관계를 가지고 있는지를 분석하는 통계적 기법
- 산점도의 점들의 분포를 통해 일정한 패턴을 확인한 후 상관계수를 구해 두 변수 간의 상관 관계를 확인함.
- Ex) GDP와 기대수명의 관계, 키와 몸무게 관계 등 두 사건(변수)간의 선형적 관계를 상관(correlation)이라고 함
- 이러한 관계에 대한 분석을 상관분석(correaltion analysis)이라고한다.

# 산점도 : 직교 좌표계를 이용해 두 개 변수 간의 관계를 나타내는 방법이다.

1-2. 상관분석의 기본 가정
# 선형성 : 두 변수 X와 Y의 관계가 직선적인지를 알아보는 것. 이 가정은 분포를 나타내는 산점도를 통하여 확인할 수 있음.
# 동변량성 : X의 값에 관계없이 Y의 흩어진 정도가 같은 것을 의미한다. 이분산성이 반대어이다.
# 두 변수의 정규분포성: 두 변수의 측정치 분포가 모집단에서 모두 정규분포를 이루는 것
# 무선독립표본 : 모집단에서 표본을 뽑을 때 표본대상이 확률적으로 선정된다는 가정

1-3. 상관분석 방법
- 단순히 두 변수의 상관관계를 측정하는 단순상관분석, 3개 이상의 변수 상관관계측정하는 다중상관분석이 있다.
- 다중상관분석에서 다른 변수들과의 관계를 고정하고 두 변수만의 관계에 대한 강도를 나타내는 것을 편상관계분석이라고 함.

1-4.공분산과 상관계수

# 공분산 : 2개의 확률변수의 상관정도를 나타내는 값
- 2개의 변수 중 하나의 값이 상승하는 경향을 보일 때 다른 값도 상승하면 공분산의 값은 양수
- 반대로 하강하는 경향을 보이면 공분산의 값은 음수
- 공분산으로는 어느정도 상관관계인지만 확인 (양인지 음인지)?
- 그러므로 공분산을 표준화시킨 상관계수를 통해 파악한다.

# 상관계수 (피어슨 상관계수)
# 상관계수 : 공분산을 표준화 시킨 값(공분산을 표준편차로 나눠준 것)
- -1~ 1 사이의 값. 0이면 선형 상관관계가 아님. > 상관이 없는 것이 아니다.
- -1에 가까울수록 강한 음의 상관관계, 1에 가까울수록 강한 양의 상관관계
- 결과값이 -1이거나 1이면 의미가 없다(일치하는 상관계수)
- 절댓값 0.7~0.9정도가 강한 상관관계이며 좋은 결과
- 단, 인과관계까지는 유추할 수 없고 단지 상관성이 있을 것이라는 추측만 가능하다.
- 인과관계에 대한 분석은 회귀분석을 통해 인과관계의 방향, 정도와 수학적 모델을 확인해 볼 수 있다

# Spearman 상관계수
- 데이터가 서열척도인 경우 즉, 자료의 값 대신 순위를 이용하는 경우의 상관계수로서 데이터를 작은 것부터 차례로 순위를
  매겨 서열 순서로 바꾼 뒤 순위를 이용해 상관계수를 구한다. 두 변수 간의 연관 관계가 있는지 없는지를 밝혀주며 자료에
  이상점이 있거나 표본크기가 작을 때 유용하다. 스피어만 상관계수는 -1과 1사이의 값을 가지는데 두 변수 안의 순위가 
  완전히 일치하면 1이고 순위가 완전히 반대이면 -1이 된다.
- Ex) 수학 잘하는 학생이 영어도 잘할까?

1-5. 상관분석의 결과
# 유의확률(p-value) : 귀무가설과 대립가설을 채택할 기준이 되는 결과값, 신뢰구간에 따라 채택 기준값이 달라짐
					유의 수준보다 작을 경우 귀무가설 기각, 대립가설 채택
# 검정통계량(t) : t분포를 사용하는 t검정을 위한 통계량 귀무가설이 참인 경우 해당 표본이 우리가 얼마나 벗어나 있는지를
			   측정해준다. 값이 큰 경우 귀무가설이 해당자료와 일치하지 않는 다는 것을 알 수 있음.
# 신뢰구간 : 표본 통계량에서 파생되어 알 수 없는 모집단 모수 값이 포함될 가능성이 있는 값의 범위.
# 표본상관계수 : 표본에서 추출한 상관계수


다중공선성
- 어떤 독립 변수가 다른 독립 변수들과 완벽한 선형 독립이 아닌 경우.
- 회귀 분석에서 사용된 모형의 일부 설명 변수가 다른 설명 변수와 상관 정도가 높아 데이터 분석 시 부정적인 영향을 미치는 현상
- 설명 변수들끼리 서로 독립이라는 가정
- 알아보고자 하는 변수의 영향력만을 확인하기 위해 만약 어느 두 설명 변수가 서로에게 영향을 주고 있다면?
- 둘 중 하나의 영향력을 검증할 때 다른 하나의 영향력을 완벽히 통제할 수 없다.
# 다중공선성을 판단하기 위해 VIF가 가장 많이 사용됨. VIF 수식의 값이 10이상 이면 해당 변수가 다중공선성이 존재하는 것으로 판단.
# 1~10 값이면 다중공선성에 대해 별 문제가 없는 것으로 판단함.
# 회귀분석에만 사용, 수치형으로 구성된 데이터에만 사용

########################################################################

2. 회귀분석

2-1. 회귀분석?
- 한 개 또는 그 이상의 변수들(x, 원인변수, 독립변수)에 대하여 달느 한 변수(종속변수) 사이의 관계를 수학적 모형을
  이용하여 설명하고 예측하는 분석기법, 잔차를 최소화 하는 선형 회귀식을 찾는 것
- 상관분석의 이 일정한 패턴을 활용하여 무엇인가를 예측하는 분석
- y = 종속변수 = 결과변수 = 반응변수 = 대응변수 = 포뮬러식 왼쪽
- x = 독립변수 = 원인변수 = 설명변수 = 요인변수 = 포뮬러식 오른쪽

2-2. 회귀분석 방법

- 단순선형회귀분석 : 독립변수 종속변수가 각각 한 개일 때의 관계를 분석
-	1. 회귀식의 추정
-	두 변수 X와 Y의 관계(rides,overall)에 적합한 회귀식을 구하기 위해서는 관측된 값으로부터 회귀계수B0, B1의 값을 추정
-	이 때 일반적으로 많이 사용되는 방법이 최소제곱법이다.

# 산점도를 통해 선형인지 비선형인지 확인하기.
# 단순회귀분석을 진행 > 회귀식 도출
# 잔차(residuals) : 선형 회귀 모델을 작성한 다음 모델로부터 구한 예측값과 실제 값의 차이
# 정규분포에서 얼마나 벗어났는지를 알 수 있다.

# 결정계수 : 상관계수의 제곱, 회구분석으로 만든 모형이 실제 데이터에 얼마만큼 잘 적영되는지 나타내느 측도
		   종속변수의 변화를 얼마나 설명하는지 나타내는 지표
		   0~1사이의 값
		   주어진 독립변수들로 예측한 종속변수값과 실제 종속변수값의 상관관계를 나타내는 계수
		   적합된 회귀방정식의 설명력은 독립변수가 추가되면 항상 증가하게 된다.
		   
# 수정된 결정계수 : 다중회귀분석에서는 결정계수가 아닌 Adjusted 결정계수를 사용한다.
				- 독립변수가 추가된다고 해서 항상 증가하지 않는다.
				- 독립변수의 수가 적고 표본의 수가 클수록 결정계수의 값에 가까워짐
				- 표본에서 얻어진 결정계수 값은 모집단에서 얻어진 결정계수보다 약간 커짐
				  이를 보완해주는 것이 수정된 결정계수
				- 변수의 수가 늘어난다면 결정계수의 값보다 수정된 R제곱 값으로 적합도를 판단하는 것이 효율적
				- 모형의 적합도를 방해하는 요인이 늘어나게 된다면 오히려 값이 줄어들 수 있다.
				










